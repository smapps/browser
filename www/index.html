<!DOCTYPE html>
<html>
  <head>
    <title>InAppBrowser.removeEventListener Example</title>
	
<script type="text/javascript" charset="utf-8" src="phonegap-3.5.0.js"></script>
    <script type="text/javascript" charset="utf-8" src="cordova-2.3.0.js"></script>
	<script src="./assets/js/jquery-1.10.2.js"></script>
    <script type="text/javascript" charset="utf-8">
		 var deviceReadyDeferred = $.Deferred();
		 var jqmReadyDeferred = $.Deferred();
		 var resourcesReady = false;


		 var app = {
			// Application Constructor
			initialize: function() {
				document.addEventListener('deviceready', this.onDeviceReady, false);

				//load scripts
				if (navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry)/)) {
					$LAB.script("cordova.js").wait(
						function(){
							document.addEventListener('deviceready', this.onDeviceReady, false);
							console.log('We are on Device');
						}
					);
				}else
				{
					console.log('We are on Browser');
					var _this = this;
					setTimeout(function(){
						_this.onDeviceReady(); 
					}, 1);
				}

				console.log('app.initialize() Called');
				$.when(deviceReadyDeferred, jqmReadyDeferred).then(this.doWhenBothFrameworksReady);
			},

			// deviceready Event Handler
			onDeviceReady: function() {
				console.log("onDeviceReady");
				window.open('http://www.smapps.nl', '_blank', 'location=yes');
				deviceReadyDeferred.resolve();
			},

			doWhenBothFrameworksReady: function()
			{
				console.log("doWhenBothFrameworksReady");
				resourcesReady = true;
			}
		};

		$(document).one("mobileinit", function () {
			$.support.cors = true;
			$.mobile.allowCrossDomainPages = true;
			$.mobile.phonegapNavigationEnabled = true;
			console.log('MobileInit');
			jqmReadyDeferred.resolve();
		 });



		function PageShowFunction(e)
		{
			// we are sure that both frameworks are ready here
		}

		function CallPageEvent(funcToCall,e)
		{
			if(resourcesReady)
			{
				return funcToCall(e);
			}else
			{
				setTimeout(function() {
					CallPageEvent(funcToCall,e);
				}, 200);
			}
		}


		$(document).ready(function () {
			console.log("document ready");
			// ALL the jQuery Mobile page events on pages must be attached here otherwise it will be too late 
			// example:
			// I use the CallPageEvent beacause this event could be called before the device ready
			/* 
			 $("#page").on("pageshow", function(e) {
						CallPageEvent(PageShowFunction,e);
					}
			 */

			//window.open('http://www.smapps.nl', '_blank', 'location=yes');

		});

		app.initialize();

    </script>
  </head>
  <body>
  <a href="#" onClick="window.open('http://www.smapps.nl', '_blank', 'location=yes'); return false;">test</a>
  </body>
</html>